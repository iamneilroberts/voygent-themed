{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://voygent.app/schemas/feature-011-status-report.json",
  "title": "Feature 011 Status Report",
  "description": "Comprehensive status assessment of Feature 011 (Transform Voygent to Prompt-Driven Template System) implementation progress",
  "type": "object",
  "required": [
    "feature_id",
    "feature_name",
    "total_requirements",
    "requirements_status",
    "admin_interface",
    "dashboard",
    "migrations",
    "gaps",
    "next_steps",
    "generated_at"
  ],
  "properties": {
    "feature_id": {
      "type": "string",
      "pattern": "^\\d{3}-[a-z0-9-]+$",
      "description": "Feature identifier (e.g., '011-transform-voygent-to')",
      "examples": ["011-transform-voygent-to"]
    },
    "feature_name": {
      "type": "string",
      "minLength": 1,
      "description": "Human-readable feature name",
      "examples": ["Transform Voygent to Prompt-Driven Template System"]
    },
    "total_requirements": {
      "type": "integer",
      "minimum": 1,
      "description": "Total number of functional requirements for this feature",
      "examples": [18]
    },
    "requirements_status": {
      "type": "array",
      "description": "Status of each functional requirement",
      "items": {
        "$ref": "#/definitions/RequirementStatus"
      },
      "minItems": 1
    },
    "admin_interface": {
      "$ref": "#/definitions/AdminInterfaceStatus"
    },
    "dashboard": {
      "$ref": "#/definitions/DashboardStatus"
    },
    "migrations": {
      "$ref": "#/definitions/MigrationStatus"
    },
    "gaps": {
      "type": "array",
      "description": "Identified implementation gaps",
      "items": {
        "$ref": "#/definitions/Gap"
      }
    },
    "next_steps": {
      "type": "array",
      "description": "Prioritized task list for feature completion",
      "items": {
        "$ref": "#/definitions/Task"
      }
    },
    "generated_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when report was generated",
      "examples": ["2025-10-07T19:30:00Z"]
    }
  },
  "definitions": {
    "RequirementStatus": {
      "type": "object",
      "required": ["id", "title", "status"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^FR-\\d{3}$",
          "description": "Functional requirement identifier",
          "examples": ["FR-001", "FR-018"]
        },
        "title": {
          "type": "string",
          "minLength": 1,
          "description": "Short requirement title",
          "examples": ["Production Deployment Verification", "Logging Integration"]
        },
        "status": {
          "type": "string",
          "enum": ["complete", "in_progress", "not_started"],
          "description": "Implementation status of this requirement"
        },
        "evidence": {
          "type": "array",
          "description": "File paths or code references proving completion (only for 'complete' status)",
          "items": {
            "type": "string"
          },
          "examples": [
            ["public/admin.html:45-67", "functions/api/lib/trip-templates.ts:89"]
          ]
        },
        "blockers": {
          "type": "array",
          "description": "Obstacles preventing completion (only for 'in_progress' or 'not_started' status)",
          "items": {
            "type": "string"
          },
          "examples": [
            ["Missing Amadeus API credentials", "Depends on migration 020 being applied"]
          ]
        }
      }
    },
    "AdminInterfaceStatus": {
      "type": "object",
      "required": ["url", "accessible", "features", "missing_capabilities"],
      "properties": {
        "url": {
          "type": "string",
          "description": "Admin interface path",
          "examples": ["/admin"]
        },
        "accessible": {
          "type": "boolean",
          "description": "Whether admin.html file exists and loads"
        },
        "features": {
          "type": "array",
          "description": "Capability checks for admin interface",
          "items": {
            "$ref": "#/definitions/FeatureCheck"
          }
        },
        "missing_capabilities": {
          "type": "array",
          "description": "Capabilities required but not present",
          "items": {
            "type": "string"
          },
          "examples": [
            ["workflow_prompt field in edit form", "progress_messages JSON editor"]
          ]
        }
      }
    },
    "DashboardStatus": {
      "type": "object",
      "required": ["url", "accessible", "features", "missing_capabilities"],
      "properties": {
        "url": {
          "type": "string",
          "description": "Dashboard path",
          "examples": ["/admin-dashboard"]
        },
        "accessible": {
          "type": "boolean",
          "description": "Whether admin-dashboard.html file exists and loads"
        },
        "features": {
          "type": "array",
          "description": "Capability checks for dashboard",
          "items": {
            "$ref": "#/definitions/FeatureCheck"
          }
        },
        "missing_capabilities": {
          "type": "array",
          "description": "Capabilities required but not present",
          "items": {
            "type": "string"
          },
          "examples": [
            ["Correlation ID filter", "Real-time log updates"]
          ]
        }
      }
    },
    "FeatureCheck": {
      "type": "object",
      "required": ["capability", "present"],
      "properties": {
        "capability": {
          "type": "string",
          "minLength": 1,
          "description": "What was checked",
          "examples": ["Template CRUD operations", "Correlation ID filter"]
        },
        "present": {
          "type": "boolean",
          "description": "Whether capability is implemented"
        },
        "notes": {
          "type": "string",
          "description": "Additional context",
          "examples": ["Edit form missing workflow_prompt field"]
        }
      }
    },
    "MigrationStatus": {
      "type": "object",
      "required": ["required", "applied", "pending"],
      "properties": {
        "required": {
          "type": "array",
          "description": "Migrations needed for Feature 011",
          "items": {
            "$ref": "#/definitions/Migration"
          }
        },
        "applied": {
          "type": "array",
          "description": "Migrations already applied to database",
          "items": {
            "$ref": "#/definitions/Migration"
          }
        },
        "pending": {
          "type": "array",
          "description": "Migrations created but not yet applied",
          "items": {
            "$ref": "#/definitions/Migration"
          }
        }
      }
    },
    "Migration": {
      "type": "object",
      "required": ["filename", "purpose", "status"],
      "properties": {
        "filename": {
          "type": "string",
          "pattern": "^\\d{3}_[a-z_]+\\.sql$",
          "description": "Migration file name",
          "examples": ["020_extend_trip_templates.sql", "021_create_handoff_documents.sql"]
        },
        "purpose": {
          "type": "string",
          "minLength": 1,
          "description": "What this migration does",
          "examples": ["Add FR-004 columns to trip_templates table"]
        },
        "status": {
          "type": "string",
          "enum": ["applied", "pending", "missing"],
          "description": "Migration application status"
        }
      }
    },
    "Gap": {
      "type": "object",
      "required": ["requirement_id", "description", "severity", "estimated_effort"],
      "properties": {
        "requirement_id": {
          "type": "string",
          "pattern": "^FR-\\d{3}$",
          "description": "Which functional requirement this gap relates to",
          "examples": ["FR-007", "FR-016"]
        },
        "description": {
          "type": "string",
          "minLength": 1,
          "description": "What's missing (actionable description)",
          "examples": ["Amadeus Flight API integration not implemented"]
        },
        "severity": {
          "type": "string",
          "enum": ["blocking", "important", "nice_to_have"],
          "description": "Impact level of this gap"
        },
        "estimated_effort": {
          "type": "string",
          "enum": ["small", "medium", "large"],
          "description": "Estimated time to close gap (small: <2h, medium: 2-8h, large: >8h)"
        }
      }
    },
    "Task": {
      "type": "object",
      "required": ["id", "description", "estimated_effort", "priority"],
      "properties": {
        "id": {
          "type": "integer",
          "minimum": 1,
          "description": "Unique task number (1-based sequential)"
        },
        "description": {
          "type": "string",
          "minLength": 1,
          "description": "What to do",
          "examples": ["Create migration 020_extend_trip_templates.sql"]
        },
        "dependencies": {
          "type": "array",
          "description": "IDs of tasks that must complete first",
          "items": {
            "type": "integer",
            "minimum": 1
          },
          "examples": [[1, 3]]
        },
        "estimated_effort": {
          "type": "string",
          "enum": ["small", "medium", "large"],
          "description": "Estimated time to complete (small: <2h, medium: 2-8h, large: >8h)"
        },
        "priority": {
          "type": "integer",
          "minimum": 1,
          "maximum": 10,
          "description": "Priority score (10 = highest)"
        }
      }
    }
  }
}
